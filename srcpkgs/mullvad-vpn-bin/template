# Template file for 'mullvad-vpn-bin'
pkgname=mullvad-vpn-bin
version=2023.3
revision=1
depends="dbus"
short_desc="Mullvad VPN client app for desktop"
maintainer="Tung Anh Vu <vu.tunganh96@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://www.mullvad.net"
distfiles="https://github.com/mullvad/mullvadvpn-app/releases/download/${version}/MullvadVPN-${version}_amd64.deb"
nopie_files="/opt/Mullvad\ VPN/resources/app.asar.unpacked/node_modules/grpc-tools/bin/grpc_node_plugin
 /opt/Mullvad\ VPN/resources/app.asar.unpacked/node_modules/grpc-tools/bin/protoc"
checksum=f972bdc54792b3ddde826b6c43ba804ee83f9fdb5a79092673866039b3d8be7e
make_dirs="/var/log/mullvad-vpn 755 0 0"

do_extract() {
  ar p ${XBPS_SRCDISTDIR}/${pkgname}-${version}/MullvadVPN-${version}_amd64.deb \
   data.tar.xz | bsdtar -x -f -

	mv usr/local/share/zsh usr/share
}

do_install() {
	vmkdir usr
	vcopy ${wrksrc}/usr/* usr

	vmkdir opt
	vcopy ${wrksrc}/opt/* opt

	vsv mullvad-vpn
}
